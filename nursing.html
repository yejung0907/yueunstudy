<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ê°„í˜¸í•™ê°œë¡  ê¸°ë§ ëì¥ë‚´ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;700;800&display=swap');
        
        :root { --primary: #4f46e5; --bg-light: #f1f5f9; --bg-dark: #0f172a; }
        body { font-family: 'Pretendard', sans-serif; background-color: var(--bg-light); color: #1e293b; height: 100vh; overflow: hidden; }
        
        /* Dark Mode */
        body.dark-mode { background-color: var(--bg-dark); color: #f8fafc; }
        body.dark-mode .bg-white { background-color: #1e293b; }
        body.dark-mode .border-gray-200 { border-color: #334155; }
        body.dark-mode .text-gray-500 { color: #94a3b8; }
        body.dark-mode .text-gray-600 { color: #cbd5e1; }
        body.dark-mode .bg-gray-50 { background-color: #334155; }
        body.dark-mode .bg-gray-100 { background-color: #475569; }
        body.dark-mode .bg-indigo-50 { background-color: rgba(79, 70, 229, 0.2); }
        body.dark-mode .hover\:bg-gray-50:hover { background-color: #334155; }

        .card-shadow { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .screen-transition { animation: fadeIn 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        @media (min-width: 1024px) { .desktop-sidebar { display: flex !important; } .mobile-nav { display: none !important; } }
        
        /* Custom Styles */
        .option-btn.correct { background-color: #dcfce7; border-color: #22c55e; color: #14532d; } /* Green-100 */
        .option-btn.wrong { background-color: #fee2e2; border-color: #ef4444; color: #7f1d1d; } /* Red-100 */
        body.dark-mode .option-btn.correct { background-color: #14532d; border-color: #22c55e; color: #dcfce7; }
        body.dark-mode .option-btn.wrong { background-color: #7f1d1d; border-color: #ef4444; color: #fee2e2; }
    </style>
</head>
<body class="flex flex-col md:flex-row h-screen transition-colors duration-300">

    <!-- Desktop Sidebar -->
    <aside class="desktop-sidebar hidden w-72 bg-white border-r border-gray-200 flex-col z-30 dark:bg-slate-900 dark:border-slate-800 transition-colors shadow-xl">
        <div class="p-8 flex items-center gap-3">
            <div class="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white font-extrabold text-xl">N</div>
            <div>
                <h1 class="font-bold text-xl dark:text-white">ê°„í˜¸í•™ê°œë¡ </h1>
                <p class="text-xs text-indigo-500 font-semibold">ê¸°ë§ê³ ì‚¬ ì™„ì „ì •ë³µ</p>
            </div>
        </div>
        <nav class="flex-1 px-4 space-y-2">
            <button onclick="switchTab('home')" class="w-full text-left p-4 rounded-xl flex items-center gap-4 hover:bg-indigo-50 text-indigo-600 font-bold transition" id="d-nav-home"><i class="fas fa-home w-6 text-center"></i> í™ˆ</button>
            <button onclick="switchTab('concept')" class="w-full text-left p-4 rounded-xl flex items-center gap-4 hover:bg-indigo-50 text-gray-500 font-medium transition" id="d-nav-concept"><i class="fas fa-book-open w-6 text-center"></i> ê°œë…</button>
            <button onclick="switchTab('wrong')" class="w-full text-left p-4 rounded-xl flex items-center gap-4 hover:bg-indigo-50 text-gray-500 font-medium transition relative" id="d-nav-wrong"><i class="fas fa-edit w-6 text-center"></i> ì˜¤ë‹µ <span id="d-nav-wrong-badge" class="absolute right-4 bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full hidden">0</span></button>
            <button onclick="switchTab('data')" class="w-full text-left p-4 rounded-xl flex items-center gap-4 hover:bg-indigo-50 text-gray-500 font-medium transition" id="d-nav-data"><i class="fas fa-save w-6 text-center"></i> ë°ì´í„°</button>
            
            <a href="index.html" class="w-full text-left p-4 rounded-xl flex items-center gap-4 hover:bg-red-50 text-red-500 font-medium transition mt-4 border-t border-gray-100 dark:border-slate-800">
                <i class="fas fa-sign-out-alt w-6 text-center"></i> ì €ì¥ì†Œ ë©”ì¸ìœ¼ë¡œ
            </a>
        </nav>
        <div class="p-6"><button onclick="toggleDarkMode()" class="w-full flex justify-between p-3 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-slate-800 text-sm font-medium text-gray-600 dark:text-gray-300"><span class="flex gap-2"><i class="fas fa-moon"></i> ë‹¤í¬ ëª¨ë“œ</span></button></div>
    </aside>

    <!-- Main -->
    <main class="flex-1 flex flex-col h-full overflow-hidden relative bg-slate-50 dark:bg-slate-950">
        <header class="md:hidden bg-white/90 backdrop-blur-md border-b border-gray-200 p-4 z-20 flex justify-between items-center sticky top-0 dark:bg-slate-900/90 dark:border-slate-800">
            <div class="flex items-center gap-3">
                <a href="index.html" class="text-gray-400 hover:text-indigo-600 transition"><i class="fas fa-chevron-left"></i></a>
                <h1 class="font-bold text-lg dark:text-white">ê°„í˜¸í•™ê°œë¡ </h1>
            </div>
            <button onclick="toggleDarkMode()" class="p-2 text-gray-500 dark:text-yellow-400"><i class="fas fa-moon" id="m-theme-icon"></i></button>
        </header>

        <div id="main-container" class="flex-1 overflow-y-auto p-4 pb-24 md:pb-8">
            <!-- Home -->
            <div id="screen-home" class="max-w-5xl mx-auto screen-transition">
                <div class="flex justify-between items-end mb-8">
                    <div>
                        <h2 class="text-3xl font-extrabold mb-2 dark:text-white">í•™ìŠµ ëŒ€ì‹œë³´ë“œ ğŸ”¥</h2>
                        <p class="text-gray-500 dark:text-gray-400">ìë™ ì €ì¥ ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
                    </div>
                    <a href="index.html" class="hidden md:flex items-center gap-2 text-sm font-bold text-gray-400 hover:text-indigo-600 transition px-4 py-2 bg-white rounded-lg shadow-sm border border-gray-200">
                        <i class="fas fa-sign-out-alt"></i> ì €ì¥ì†Œ ë©”ì¸ìœ¼ë¡œ
                    </a>
                </div>

                <div id="resume-area" class="hidden mb-8 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden">
                    <div class="relative z-10 flex justify-between items-center">
                        <div>
                            <div class="bg-blue-800/30 inline-block px-3 py-1 rounded-full text-xs font-bold mb-2">ì§„í–‰ ì¤‘</div>
                            <h3 class="text-xl font-bold">í•™ìŠµì„ ì´ì–´ì„œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h3>
                            <p class="text-blue-100 text-sm mt-1">ë§ˆì§€ë§‰: Q.<span id="resume-qnum">0</span></p>
                        </div>
                        <button onclick="resumeQuiz()" class="bg-white text-blue-600 px-6 py-3 rounded-xl font-bold shadow-md hover:bg-blue-50 transition"><i class="fas fa-play mr-2"></i>ì´ì–´í•˜ê¸°</button>
                    </div>
                </div>

                <div class="grid md:grid-cols-12 gap-6 mb-8">
                    <div class="md:col-span-8 bg-white dark:bg-slate-800 rounded-3xl p-8 shadow-sm border border-gray-100 dark:border-slate-700">
                        <h3 class="text-xl font-bold mb-4 dark:text-white">ë‚˜ì˜ í†µê³„</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-gray-50 dark:bg-slate-700 p-4 rounded-2xl"><div class="text-xs text-gray-400">ì´ ì‹œë„</div><div class="text-2xl font-bold dark:text-white" id="total-attempts">0</div></div>
                            <div class="bg-gray-50 dark:bg-slate-700 p-4 rounded-2xl"><div class="text-xs text-gray-400">í‰ê·  ì ìˆ˜</div><div class="text-2xl font-bold text-green-500" id="avg-score">0.0%</div></div>
                            <div class="bg-gray-50 dark:bg-slate-700 p-4 rounded-2xl"><div class="text-xs text-gray-400">ë§ˆìŠ¤í„°</div><div class="text-2xl font-bold text-blue-500"><span id="mastered-count">0</span>/100</div></div>
                            <div class="bg-gray-50 dark:bg-slate-700 p-4 rounded-2xl"><div class="text-xs text-gray-400">ì˜¤ë‹µ</div><div class="text-2xl font-bold text-red-500" id="total-wrong">0</div></div>
                        </div>
                    </div>
                    <div class="md:col-span-4 flex flex-col gap-4">
                        <button onclick="startQuiz('all')" class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-3xl p-6 shadow-lg shadow-indigo-200 transition text-left group relative overflow-hidden">
                            <div class="relative z-10">
                                <i class="fas fa-play text-3xl mb-3 block opacity-80"></i>
                                <div class="font-bold text-xl">ì „ì²´ 100ì œ ì‹œì‘</div>
                                <div class="text-indigo-200 text-sm">ì‹¤ì „ ëª¨ì˜ê³ ì‚¬ ëª¨ë“œ</div>
                            </div>
                            <i class="fas fa-play absolute -right-4 -bottom-4 text-9xl text-white opacity-10 group-hover:scale-110 transition"></i>
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onclick="startQuiz('random30')" class="bg-white dark:bg-slate-800 p-5 rounded-2xl border border-gray-100 dark:border-slate-700 hover:border-indigo-500 transition text-center"><i class="fas fa-random text-purple-500 text-2xl mb-2"></i><div class="font-bold text-sm dark:text-gray-300">ëœë¤ 30</div></button>
                    <button onclick="startQuiz('history')" class="bg-white dark:bg-slate-800 p-5 rounded-2xl border border-gray-100 dark:border-slate-700 hover:border-blue-500 transition text-center"><i class="fas fa-history text-blue-500 text-2xl mb-2"></i><div class="font-bold text-sm dark:text-gray-300">ì—­ì‚¬ íŒŒíŠ¸</div></button>
                    <button onclick="startQuiz('theory')" class="bg-white dark:bg-slate-800 p-5 rounded-2xl border border-gray-100 dark:border-slate-700 hover:border-indigo-500 transition text-center"><i class="fas fa-brain text-indigo-500 text-2xl mb-2"></i><div class="font-bold text-sm dark:text-gray-300">ì „ë¬¸ì§/ì´ë¡ </div></button>
                    <button onclick="startQuiz('law')" class="bg-white dark:bg-slate-800 p-5 rounded-2xl border border-gray-100 dark:border-slate-700 hover:border-green-500 transition text-center"><i class="fas fa-balance-scale text-green-500 text-2xl mb-2"></i><div class="font-bold text-sm dark:text-gray-300">ë²•ê·œ/ìœ¤ë¦¬</div></button>
                </div>
                <div class="mt-8 text-center"><button onclick="resetData()" class="text-xs text-gray-400 underline hover:text-red-500">ë°ì´í„° ì´ˆê¸°í™”</button></div>
            </div>

            <!-- Quiz / Concept / Wrong / Data screens -->
            <div id="screen-concept" class="hidden max-w-4xl mx-auto screen-transition">
                <h2 class="text-2xl font-bold mb-6 dark:text-white">ğŸ’¡ ê°œë… ì‹¬í™”í•™ìŠµ</h2>
                <div class="space-y-6 pb-20" id="concept-container"></div>
            </div>
            <div id="screen-wrong" class="hidden max-w-4xl mx-auto screen-transition">
                <div class="flex justify-between items-center mb-6"><h2 class="text-2xl font-bold dark:text-white">ì˜¤ë‹µ ë…¸íŠ¸</h2><button onclick="startQuiz('retry')" id="retry-btn" class="hidden bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-bold">ì˜¤ë‹µ ë‹¤ì‹œ í’€ê¸°</button></div>
                <div id="wrong-container" class="space-y-4 pb-20"></div>
            </div>
            <div id="screen-data" class="hidden max-w-2xl mx-auto screen-transition">
                <h2 class="text-2xl font-bold mb-6 dark:text-white">ğŸ’¾ ë°ì´í„° ê´€ë¦¬</h2>
                <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-slate-700 mb-6">
                    <h3 class="font-bold mb-2 dark:text-white">ë°±ì—… (ì½”ë“œ ë³µì‚¬)</h3>
                    <textarea id="export-area" readonly class="w-full h-20 p-3 bg-gray-50 dark:bg-slate-900 rounded-xl text-xs mb-3 font-mono"></textarea>
                    <button onclick="generateExportCode()" class="w-full bg-blue-600 text-white py-2 rounded-xl font-bold">ì½”ë“œ ìƒì„±</button>
                </div>
                <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-slate-700">
                    <h3 class="font-bold mb-2 dark:text-white">ë³µêµ¬ (ì½”ë“œ ì…ë ¥)</h3>
                    <textarea id="import-area" class="w-full h-20 p-3 bg-gray-50 dark:bg-slate-900 rounded-xl text-xs mb-3 font-mono"></textarea>
                    <button onclick="loadImportCode()" class="w-full bg-green-600 text-white py-2 rounded-xl font-bold">ë°ì´í„° ë³µêµ¬</button>
                </div>
            </div>
            <div id="screen-quiz" class="hidden max-w-3xl mx-auto h-full flex flex-col">
                <div class="flex justify-between items-center mb-6">
                    <button onclick="quitQuiz()" class="text-gray-400 bg-gray-100 dark:bg-slate-800 px-3 py-1.5 rounded-lg text-sm font-bold"><i class="fas fa-pause mr-1"></i> í™ˆìœ¼ë¡œ (ìë™ì €ì¥)</button>
                    <div class="text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full" id="quiz-category">Topic</div>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2 mb-6"><div id="progress-bar" class="bg-indigo-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div></div>
                <div class="flex-1 overflow-y-auto pb-4 px-1">
                    <div class="bg-white dark:bg-slate-800 rounded-3xl p-6 md:p-10 card-shadow mb-6"><div class="text-gray-400 text-sm font-bold mb-4">Q.<span id="q-num">1</span></div><h3 class="text-xl font-bold dark:text-white mb-8 leading-relaxed" id="q-text"></h3><div class="space-y-3" id="options-area"></div></div>
                    <div id="feedback-area" class="hidden bg-indigo-50 dark:bg-slate-800 border-l-4 border-indigo-500 p-6 rounded-r-2xl mb-6"><h4 id="fb-title" class="font-bold text-lg mb-2 dark:text-white"></h4><p id="fb-desc" class="text-sm text-gray-700 dark:text-gray-300 mb-4"></p><button onclick="nextQuestion()" class="w-full bg-indigo-600 text-white py-3 rounded-xl font-bold">ë‹¤ìŒ ë¬¸ì œ</button></div>
                </div>
            </div>
            <div id="screen-result" class="hidden max-w-md mx-auto text-center py-10 h-full flex flex-col justify-center">
                <h2 class="text-3xl font-bold mb-2 dark:text-white" id="res-title">ê²°ê³¼</h2><p class="text-gray-500 mb-10" id="res-msg"></p><div class="text-6xl font-black text-indigo-600 mb-10" id="res-score">0</div><button onclick="switchTab('home')" class="w-full bg-indigo-600 text-white font-bold py-4 rounded-xl shadow-xl">í™ˆìœ¼ë¡œ</button>
            </div>
        </div>
    </main>

    <!-- Mobile Nav -->
    <nav class="mobile-nav md:hidden fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-lg border-t border-gray-200 dark:bg-slate-900/95 dark:border-slate-800 flex justify-around p-2 z-30 pb-safe shadow-[0_-4px_20px_rgba(0,0,0,0.05)]">
        <button onclick="switchTab('home')" class="nav-item flex-1 p-2 text-center text-indigo-600 transition" id="m-nav-home"><i class="fas fa-home block text-xl mb-1"></i><span class="text-[10px]">í™ˆ</span></button>
        <button onclick="switchTab('concept')" class="nav-item flex-1 p-2 text-center text-gray-400 transition" id="m-nav-concept"><i class="fas fa-book-open block text-xl mb-1"></i><span class="text-[10px]">ê°œë…</span></button>
        <button onclick="switchTab('wrong')" class="nav-item flex-1 p-2 text-center text-gray-400 relative transition" id="m-nav-wrong"><i class="fas fa-edit block text-xl mb-1"></i><span class="text-[10px]">ì˜¤ë‹µ</span><span id="m-nav-wrong-badge" class="absolute top-2 right-[30%] w-2 h-2 bg-red-500 rounded-full hidden"></span></button>
        <button onclick="switchTab('data')" class="nav-item flex-1 p-2 text-center text-gray-400 transition" id="m-nav-data"><i class="fas fa-save block text-xl mb-1"></i><span class="text-[10px]">ì €ì¥</span></button>
    </nav>

    <script>
        // --- DATA ---
        const concepts = [
            {title:"1. í•œêµ­ê°„í˜¸ì—­ì‚¬ (1): ì¡°ì„ ~êµ¬í•œë§", color:"blue", content:`<ul class="list-disc pl-4 text-sm space-y-1 text-gray-700 dark:text-gray-300"><li><strong>ì˜ë…€ì œë„(1406):</strong> ì œìƒì› ì°½ì„¤, ë‚¨ë…€ìœ ë³„ í•´ê²°</li><li><strong>ì œì¤‘ì›(1885):</strong> ì•Œë Œ ì„¤ë¦½, ìµœì´ˆ ì„œì–‘ì‹ ë³‘ì›</li><li><strong>ë³´êµ¬ì—¬ê´€(1887):</strong> ìµœì´ˆ ì—¬ì„±ë³‘ì›. <strong>1903ë…„ ì—ë“œë¨¼ì¦ˆ</strong> ê°„í˜¸êµìœ¡ ì‹œì‘.</li><li><strong>ëŒ€í•œì˜ì›(1907):</strong> ì •ë¶€ ê³µì‹ ê°„í˜¸êµìœ¡ì˜ íš¨ì‹œ</li></ul>`},
            {title:"2. í•œêµ­ê°„í˜¸ì—­ì‚¬ (2): ì¼ì œ~ì „ìŸ", color:"blue", content:`<ul class="list-disc pl-4 text-sm space-y-1 text-gray-700 dark:text-gray-300"><li><strong>ì¼ì œê°•ì ê¸°:</strong> ì˜ì‚¬ ë³´ì¡° ì—­í•  ì¹˜ì¤‘, 1914ë…„ ê°„í˜¸ë¶€ê·œì¹™</li><li><strong>ë¯¸êµ°ì •(1945):</strong> <strong>ê°„í˜¸ì‚¬ì—…êµ­</strong> ì„¤ì¹˜ (ìµœì´ˆ ë…ë¦½ í–‰ì •ë¶€ì„œ)</li><li><strong>êµ­ë¯¼ì˜ë£Œë²•(1951):</strong> ì „ì‹œ ì¸ë ¥ í™•ë³´ ìœ„í•´ <strong>ê²€ì •ê³ ì‹œì œ</strong> ì¡´ì¹˜</li></ul>`},
            {title:"3. í•œêµ­ê°„í˜¸ì—­ì‚¬ (3): ì„±ì¥~í˜„ëŒ€", color:"blue", content:`<ul class="list-disc pl-4 text-sm space-y-1 text-gray-700 dark:text-gray-300"><li><strong>1962ë…„ ì˜ë£Œë²•:</strong> ê²€ì •ê³ ì‹œ íì§€(êµ­ê°€ê³ ì‹œì œ)</li><li><strong>1973ë…„ ì˜ë£Œë²•:</strong> ë¶„ì•¼ë³„ ê°„í˜¸ì‚¬ ì¸ì •, ë³´ìˆ˜êµìœ¡ ì˜ë¬´í™”</li><li><strong>1987ë…„ ì˜ë£Œë²•:</strong> <strong>ê°„í˜¸ì‚¬(å¸«)</strong> ëª…ì¹­ ë³€ê²½</li><li><strong>1980 ë†íŠ¹ë²•:</strong> ì˜ë£Œì·¨ì•½ì§€ì— <strong>ë³´ê±´ì§„ë£Œì›</strong> ë°°ì¹˜</li></ul>`},
            {title:"4. ì „ë¬¸ì§ê´€ ì´ë¡ ", color:"indigo", content:`<ul class="list-disc pl-4 text-sm space-y-1 text-gray-700 dark:text-gray-300"><li><strong>íŒŒë°œì½”:</strong> ì´ë¡ , ì‚¬íšŒê°€ì¹˜, ì¥ê¸°í›ˆë ¨, ììœ¨ì„±, ìœ¤ë¦¬ê°•ë ¹ ë“± 8ê°€ì§€</li><li><strong>í”Œë ‰ìŠ¤ë„ˆ:</strong> ì§€ì  í™œë™, ì—°êµ¬, <strong>ì´íƒ€ì£¼ì˜</strong></li><li><strong>í™€:</strong> ë‹¨ì²´ ì¤€ê±°, ê³µê³µ ë´‰ì‚¬, ììœ¨ì„±, ìì²´ ê·œì œ, ì†Œëª…ê° (â€»ë†’ì€ ê¸‰ì—¬ ì œì™¸)</li></ul>`},
            {title:"5. ì „ë¬¸ì§ ì‚¬íšŒí™”", color:"purple", content:`<ul class="list-disc pl-4 text-sm space-y-1 text-gray-700 dark:text-gray-300"><li><strong>ë² ë„ˆ(5ë‹¨ê³„):</strong> ì ì„ì(ê¸°íš) â†’ ìˆ™ë ¨ê°€ â†’ ì „ë¬¸ê°€(ì§ê´€)</li><li><strong>í¬ë˜ë¨¸(í˜„ì‹¤ì¶©ê²©):</strong> ë°€ì›”ê¸° â†’ <strong>ì¶©ê²©ê¸°</strong> â†’ íšŒë³µê¸° â†’ í•´ê²°ê¸°</li><li><strong>ë‹¬íŠ¼:</strong> ìˆ˜ìŠµì(ì˜ì¡´) â†’ ë™ë£Œ(ë…ë¦½) â†’ <strong>ë©˜í† (ì§€ë„)</strong> â†’ í›„ì›ì</li></ul>`},
            {title:"6. ë²•ê·œì™€ ìœ¤ë¦¬", color:"green", content:`<ul class="list-disc pl-4 text-sm space-y-1 text-gray-700 dark:text-gray-300"><li><strong>ì£¼ì˜ì˜ë¬´:</strong> ê²°ê³¼ ì˜ˆê²¬ + íšŒí”¼ ì˜ë¬´</li><li><strong>í™•ì¸ì˜ë¬´:</strong> 5 Right ë“± (ì£¼ì˜ì˜ë¬´ì˜ ì¼ì¢…)</li><li><strong>ìœ¤ë¦¬ì›ì¹™:</strong> ììœ¨ì„± ì¡´ì¤‘, ì•…í–‰ê¸ˆì§€, ì„ í–‰, ì •ì˜</li></ul>`}
        ];
        
        // 100 Questions DB
        const questionsDB = [
            {id:1, category:"ì „ë¬¸ì§ê´€", question:"íŒŒë°œì½”ì˜ ì „ë¬¸ì§ íŠ¹ì„± 8ê°€ì§€ê°€ ì•„ë‹Œ ê²ƒì€?", options:["ì´ë¡  ë° ì§€ì  ê¸°ìˆ ","ì‚¬íšŒì  ê°€ì¹˜ ê´€ë ¨ì„±","ë‹¨ê¸°ê°„ì˜ í›ˆë ¨","ììœ¨ì„±"], answer:2, explanation:"ì „ë¬¸ì§ì€ ì¥ê¸°ê°„ì˜ êµìœ¡ì„ í•„ìš”ë¡œ í•©ë‹ˆë‹¤."},
            {id:2, category:"ì „ë¬¸ì§ê´€", question:"í”Œë ‰ìŠ¤ë„ˆì˜ ì „ë¬¸ì§ ê¸°ì¤€ 'ì´íƒ€ì£¼ì˜'ë€?", options:["ì‚¬íšŒë´‰ì‚¬ ìš°ì„ ","ë†’ì€ ê¸‰ì—¬","ì±…ì„ ë©´ì œ","ê²½ìŸ"], answer:0, explanation:"ì „ë¬¸ì§ì€ ì´ê¸°ì  ë™ê¸°ë³´ë‹¤ ì´íƒ€ì  ë™ê¸°(ì‚¬íšŒ ë´‰ì‚¬)ê°€ ìš°ì„ ì…ë‹ˆë‹¤."},
            {id:3, category:"ì „ë¬¸ì§ê´€", question:"í™€(Hall)ì˜ ì „ë¬¸ì§ íƒœë„ ì²™ë„ ì œì™¸ í•­ëª©ì€?", options:["ì†Œëª…ê°","ììœ¨ì„± ì‹ ë…","ìì²´ ê·œì œ","ê²½ì œì  ë³´ìƒ"], answer:3, explanation:"ë†’ì€ ê²½ì œì  ë³´ìƒì€ í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤."},
            {id:4, category:"ì „ë¬¸ì§ê´€", question:"ë‹¬íŠ¼ì˜ ê²½ë ¥ ê°œë°œ 3ë‹¨ê³„(ë©˜í† ) íŠ¹ì§•ì€?", options:["ì˜ì¡´ì ","íƒ€ì¸ ì§€ë„","ë°©í–¥ ì œì‹œ","ë…ë¦½ì "], answer:1, explanation:"3ë‹¨ê³„ëŠ” ë©˜í† ë¡œì„œ í›„ë°°ë¥¼ ì§€ë„í•©ë‹ˆë‹¤."},
            {id:5, category:"ì „ë¬¸ì§ê´€", question:"í¬ë˜ë¨¸ í˜„ì‹¤ì¶©ê²© ì¤‘ 'ë¶„ë…¸/ì¢Œì ˆ' ë‹¨ê³„ëŠ”?", options:["ë°€ì›”ê¸°","ì¶©ê²©ê¸°","íšŒë³µê¸°","í•´ê²°ê¸°"], answer:1, explanation:"ì¶©ê²©ê¸°(Shock phase)ì…ë‹ˆë‹¤."},
            {id:6, category:"ì „ë¬¸ì§ê´€", question:"ë² ë„ˆ ë‹¨ê³„ ì¤‘ '2~3ë…„ì°¨, ê¸°íš ëŠ¥ë ¥'ì€?", options:["ì´ˆì‹¬ì","ì‹ ì°¸ì","ì ì„ì","ìˆ™ë ¨ê°€"], answer:2, explanation:"ì ì„ì(Competent) ë‹¨ê³„ì…ë‹ˆë‹¤."},
            {id:7, category:"ì „ë¬¸ì§ê´€", question:"ì „ë¬¸ì§ 'ììœ¨ì„±'ì˜ ì˜ë¯¸ëŠ”?", options:["ê°„ì„­ ë°°ì œ","ì—…ë¬´ ìŠ¤ìŠ¤ë¡œ í†µì œ","ë¬´ì¡°ê±´ ìˆ˜ìš©","ê·œì¹™ ë¬´ì‹œ"], answer:1, explanation:"ì§ë¬´ì— ëŒ€í•´ ìŠ¤ìŠ¤ë¡œ ê²°ì •í•˜ê³  ì±…ì„ì§€ëŠ” ê¶Œí•œì…ë‹ˆë‹¤."},
            {id:8, category:"ì „ë¬¸ì§ê´€", question:"ì¼ˆë¦¬ì˜ ì§€ì‹ ì¶•ì  ë°©ë²•ì€?", options:["ê²½í—˜","ê´€ìŠµ","ì—°êµ¬(Research)","ì§€ì‹œ"], answer:2, explanation:"ì§€ì†ì ì¸ ì—°êµ¬ë¥¼ í†µí•´ í™•ì¥ë©ë‹ˆë‹¤."},
            {id:9, category:"ì „ë¬¸ì§ê´€", question:"ì‹¬ìŠ¨ì˜ ì‚¬íšŒí™” 3ë‹¨ê³„ ë§ˆì§€ë§‰ì€?", options:["ê¸°ìˆ  ìŠµë“","ê°€ì¹˜ ë‚´ë©´í™”","ì—­í•  í†µí•©","í˜„ì‹¤ ì•ˆì£¼"], answer:2, explanation:"ê¸°ìˆ â†’ê°€ì¹˜â†’ì—­í• í†µí•© ìˆœì„œì…ë‹ˆë‹¤."},
            {id:10, category:"ì „ë¬¸ì§ê´€", question:"ë² ë„ˆ ëª¨ë¸ 'ì§ê´€ì  íŒŒì•…' ë‹¨ê³„ëŠ”?", options:["ì ì„ì","ìˆ™ë ¨ê°€","ì „ë¬¸ê°€","ì‹ ì°¸ì"], answer:2, explanation:"ì „ë¬¸ê°€ ë‹¨ê³„ì˜ íŠ¹ì§•ì…ë‹ˆë‹¤."},
            {id:11, category:"ì—­ì‚¬", question:"1903ë…„ ë³´êµ¬ì—¬ê´€ ê°„í˜¸ì–‘ì„±ì†Œ ì„¤ë¦½ìëŠ”?", options:["ì‰´ì¦ˆ","ì—ë“œë¨¼ì¦ˆ","ìŠ¤í¬ëœíŠ¼","ì œì½¥ìŠ¨"], answer:1, explanation:"ë§ˆê°€ë › ì—ë“œë¨¼ì¦ˆì…ë‹ˆë‹¤."},
            {id:12, category:"ì—­ì‚¬", question:"1945ë…„ ë¯¸êµ°ì •ê¸° ìµœì´ˆ ë…ë¦½ ê°„í˜¸ í–‰ì • ê¸°êµ¬ëŠ”?", options:["ê°„í˜¸ì‚¬ì—…êµ­","ê°„í˜¸ê³¼","ë³´ê±´êµ­","ì˜ì •êµ­"], answer:0, explanation:"ê°„í˜¸ì‚¬ì—…êµ­ì…ë‹ˆë‹¤."},
            {id:13, category:"ì—­ì‚¬", question:"1962ë…„ ì˜ë£Œë²• ê°œì • í•µì‹¬ì€?", options:["ëª…ì¹­ ë³€ê²½","êµ­ê°€ê³ ì‹œì œ ë„ì…","ì „ë¬¸ê°„í˜¸ì‚¬","4ë…„ì œ"], answer:1, explanation:"ê²€ì •ê³ ì‹œ íì§€, êµ­ê°€ì‹œí—˜ì œ ë„ì…."},
            {id:14, category:"ì—­ì‚¬", question:"1987ë…„ ì˜ë£Œë²• ê°œì • ëª…ì¹­ ë³€í™”ëŠ”?", options:["ê°„í˜¸ì›->ê°„í˜¸ì‚¬","ê°„í˜¸ë¶€->ê°„í˜¸ì›","ì¡°ì‚°ì›->ì¡°ì‚°ì‚¬","ì˜ë£Œì¸"], answer:0, explanation:"ê°„í˜¸ì›(å“¡)ì—ì„œ ê°„í˜¸ì‚¬(å¸«)ë¡œ ë³€ê²½."},
            {id:15, category:"ë²•ê·œ", question:"ì˜ë£Œë²•ìƒ ì˜ë£Œì¸ì´ ì•„ë‹Œ ìëŠ”?", options:["ì˜ì‚¬","ê°„í˜¸ì‚¬","ì¡°ì‚°ì‚¬","ì•½ì‚¬"], answer:3, explanation:"ì•½ì‚¬ëŠ” ì•½ì‚¬ë²•ì— ë”°ë¥´ë©° ì˜ë£Œì¸ì´ ì•„ë‹™ë‹ˆë‹¤."},
            {id:16, category:"ë²•ê·œ", question:"'ê²°ê³¼ ì˜ˆê²¬/íšŒí”¼'ì™€ ê´€ë ¨ëœ ì˜ë¬´ëŠ”?", options:["ì£¼ì˜ì˜ë¬´","ì„¤ëª…ì˜ë¬´","ë¹„ë°€ìœ ì§€","í™•ì¸ì˜ë¬´"], answer:0, explanation:"ì£¼ì˜ì˜ë¬´(Duty of Care)ì…ë‹ˆë‹¤."},
            {id:17, category:"ìœ¤ë¦¬", question:"í™˜ì ìê¸°ê²°ì •ê¶Œ ì¡´ì¤‘ ì›ì¹™ì€?", options:["ììœ¨ì„± ì¡´ì¤‘","ì•…í–‰ê¸ˆì§€","ì„ í–‰","ì •ì˜"], answer:0, explanation:"ììœ¨ì„± ì¡´ì¤‘ì˜ ì›ì¹™ì…ë‹ˆë‹¤."},
            {id:18, category:"ì—­ì‚¬", question:"1923ë…„ íƒœí™”ì—¬ìê´€ ê³µì¤‘ë³´ê±´ ì‚¬ì—… ì¸ë¬¼ì€?", options:["ë¡œì  ë²„ê±°/í•œì‹ ê´‘","ì‰´ì¦ˆ","ì—ë“œë¨¼ì¦ˆ","ì•Œë Œ"], answer:0, explanation:"ë¡œì  ë²„ê±°ì™€ í•œì‹ ê´‘ì…ë‹ˆë‹¤."},
            {id:19, category:"ì—­ì‚¬", question:"ëŒ€í•œê°„í˜¸í˜‘íšŒ ì „ì‹ (1923)ì€?", options:["ì¡°ì„ ê°„í˜¸ë¶€íšŒ","ì¡°ì„ ê°„í˜¸í˜‘íšŒ","ì¬ì¡°ì„ ì¡¸ì—…ê°„í˜¸ë¶€íšŒ","ê°„í˜¸í•™íšŒ"], answer:0, explanation:"ì„œì„œí‰ì´ ì£¼ë„í•œ ì¡°ì„ ê°„í˜¸ë¶€íšŒì…ë‹ˆë‹¤."},
            {id:20, category:"ì „ë¬¸ì§ê´€", question:"ì‚¬íšŒí™” ê³¼ì •ì—ì„œ ì—­í•  ëª¨ë¸ì˜ ì¤‘ìš”ì„±ì€?", options:["í–‰ë™/ê°€ì¹˜ ìŠµë“","ì˜í–¥ ì—†ìŒ","ë¶€ì •ì ","ì§€ì‹ ì „ë‹¬"], answer:0, explanation:"í–‰ë™ê³¼ ê°€ì¹˜ë¥¼ ë‚´ë©´í™”í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤."},
            {id:21, category:"ì—­ì‚¬", question:"ì œì¤‘ì› ì„¤ë¦½ ì—°ë„ëŠ”?", options:["1876","1885","1899","1904"], answer:1, explanation:"1885ë…„ ì•Œë Œì´ ì„¤ë¦½í–ˆìŠµë‹ˆë‹¤."},
            {id:22, category:"ì—­ì‚¬", question:"ì œì¤‘ì› ì´ˆê¸° ì„ êµê°„í˜¸ì‚¬(ì‚¬ë§)ëŠ”?", options:["ì œì½¥ìŠ¨","ì‰´ì¦ˆ","ì—ë“œë¨¼ì¦ˆ","íˆë“œì½”íŠ¸"], answer:0, explanation:"ì œì½¥ìŠ¨(Jacobson)ì…ë‹ˆë‹¤."},
            {id:23, category:"ì—­ì‚¬", question:"ì†Œë¡ë„ ìí˜œë³‘ì›(1917) ê´€ë ¨ ì§ˆë³‘ì€?", options:["ê²°í•µ","í•œì„¼ë³‘","ì½œë ˆë¼","ì¥í‹°í‘¸ìŠ¤"], answer:1, explanation:"í•œì„¼ë³‘ í™˜ì ê²©ë¦¬ ìˆ˜ìš©ì†Œì˜€ìŠµë‹ˆë‹¤."},
            {id:24, category:"ì—­ì‚¬", question:"1908ë…„ í•œêµ­ ìµœì´ˆ ê°„í˜¸ì‚¬íšŒ ì¡°ì§ì€?", options:["ëŒ€í•œê°„í˜¸í˜‘íšŒ","ì¬ì¡°ì„ ì¡¸ì—…ê°„í˜¸ë¶€íšŒ","ì¡°ì„ ê°„í˜¸ë¶€íšŒ","ICN"], answer:1, explanation:"ì„œì–‘ì¸ ê°„í˜¸ì‚¬ ì¤‘ì‹¬ì˜ ì¬ì¡°ì„  ì¡¸ì—…ê°„í˜¸ë¶€íšŒ."},
            {id:25, category:"ì—­ì‚¬", question:"1924ë…„ í•œêµ­ì¸ ê°„í˜¸ì‚¬ ì£¼ì¶• ë‹¨ì²´ëŠ”?", options:["ì¡°ì„ ê°„í˜¸ë¶€í˜‘íšŒ","ì¡°ì„ ê°„í˜¸ë¶€íšŒ","ì¬ì¡°ì„ ê°„í˜¸ë¶€íšŒ","í˜‘íšŒ"], answer:0, explanation:"í•œêµ­ì¸ ê¶Œìµ ìœ„í•´ ì¡°ì„ ê°„í˜¸ë¶€í˜‘íšŒ ê²°ì„±."},
            {id:26, category:"ì—­ì‚¬", question:"1948ë…„ ì°½ì„¤ êµ° ê°„í˜¸ ì¡°ì§ì€?", options:["ê³µêµ°","ìœ¡êµ°ê°„í˜¸ì¥êµë‹¨","êµ­êµ°ê°„í˜¸ì‚¬ê´€í•™êµ","í•´êµ°"], answer:1, explanation:"ì •ë¶€ ìˆ˜ë¦½ê³¼ í•¨ê»˜ ìœ¡êµ°ê°„í˜¸ì¥êµë‹¨ ì°½ì„¤."},
            {id:27, category:"ì—­ì‚¬", question:"1953ë…„ ë¶€ì‚° ì°½ê°„ í˜‘íšŒ ê¸°ê´€ì§€ëŠ”?", options:["ê°„í˜‘ì‹ ë³´","ëŒ€í•œê°„í˜¸","ê°„í˜¸í•™íšŒì§€","ë‰´ìŠ¤"], answer:1, explanation:"'ëŒ€í•œê°„í˜¸' ì†ê°„ 1í˜¸ ë°œê°„."},
            {id:28, category:"ì—­ì‚¬", question:"í•œêµ­ ìµœì´ˆ ë‚˜ì´íŒ…ê²Œì¼ ê¸°ì¥ ìˆ˜ìƒìëŠ”?", options:["ì´íš¨ì •","ê¹€ì˜¨ìˆœ","ì´ì˜ë³µ","í™ì˜¥ìˆœ"], answer:0, explanation:"ì´íš¨ì • ì—¬ì‚¬ì…ë‹ˆë‹¤."},
            {id:29, category:"ì—­ì‚¬", question:"1970ë…„ ì°½ì„¤ í•™ìˆ  ë‹¨ì²´ëŠ”?", options:["ë³‘ì›ê°„í˜¸ì‚¬íšŒ","ëŒ€í•œê°„í˜¸í•™íšŒ","ë³´ê±´ê°„í˜¸ì‚¬íšŒ","ì¡°ì‚°ì‚¬íšŒ"], answer:1, explanation:"ëŒ€í•œê°„í˜¸í•™íšŒ(í˜„ í•œêµ­ê°„í˜¸ê³¼í•™íšŒ)."},
            {id:30, category:"ì „ë¬¸ì§ê´€", question:"í”Œë ‰ìŠ¤ë„ˆ ê¸°ì¤€ì´ ì•„ë‹Œ ê²ƒì€?", options:["ì§€ì  í™œë™","ì±…ì„ê°","êµìœ¡/í›ˆë ¨","ì´ê¸°ì  ë™ê¸°"], answer:3, explanation:"ì „ë¬¸ì§ì€ ì´íƒ€ì ì´ì–´ì•¼ í•©ë‹ˆë‹¤."},
            {id:31, category:"ìœ¤ë¦¬", question:"ì‚¬ì „ë™ì˜ì˜ ê·¼ê±°ê°€ ë˜ëŠ” ì›ì¹™ì€?", options:["ììœ¨ì„± ì¡´ì¤‘","ì•…í–‰ê¸ˆì§€","ì„ í–‰","ì •ì˜"], answer:0, explanation:"ììœ¨ì„± ì¡´ì¤‘ ì›ì¹™."},
            {id:32, category:"ìœ¤ë¦¬", question:"ì˜ë£Œ ìì› ê³µì • ë¶„ë°° ì›ì¹™ì€?", options:["ììœ¨ì„±","ì•…í–‰ê¸ˆì§€","ì„ í–‰","ì •ì˜"], answer:3, explanation:"ì •ì˜(Justice) ì›ì¹™ì…ë‹ˆë‹¤."},
            {id:33, category:"ìœ¤ë¦¬", question:"í•´ë¥¼ ì…íˆì§€ ì•Šì•„ì•¼ í•œë‹¤ëŠ” ì˜ë¬´ëŠ”?", options:["ììœ¨ì„±","ì•…í–‰ê¸ˆì§€","ì„ í–‰","ì •ì˜"], answer:1, explanation:"ì•…í–‰ ê¸ˆì§€(Non-maleficence)."},
            {id:34, category:"ë²•ê·œ", question:"ê°„í˜¸ì‚¬ ë…ìì  í–‰ìœ„ê°€ ì•„ë‹Œ ê²ƒì€?", options:["í™œë ¥ì§•í›„","ê°„í˜¸ì‚¬ì •","ë³´ê±´êµìœ¡","ì „ë¬¸ì˜ì•½í’ˆ íˆ¬ì—¬"], answer:3, explanation:"ì „ë¬¸ì˜ì•½í’ˆ íˆ¬ì—¬ëŠ” ì˜ì‚¬ ì²˜ë°© í•˜ ì§„ë£Œ ë³´ì¡°."},
            {id:35, category:"ì—­ì‚¬", question:"ë‚˜ì´íŒ…ê²Œì¼ í™œë™ ì „ìŸì€?", options:["í¬ë¦¼ì „ìŸ","ë³´ë¶ˆì „ìŸ","ë°±ë…„ì „ìŸ","1ì°¨ëŒ€ì „"], answer:0, explanation:"í¬ë¦¼ì „ìŸ(1854)ì…ë‹ˆë‹¤."},
            {id:36, category:"ì—­ì‚¬", question:"ë‚˜ì´íŒ…ê²Œì¼ ì´ë… ì•„ë‹Œ ê²ƒì€?", options:["ì „ì¸ê°„í˜¸","í™˜ê²½ìœ„ìƒ","ì°¨ë³„ì—†ëŠ”ê°„í˜¸","ì¢…êµì  ê°œì¢…"], answer:3, explanation:"ë¹„ì¢…êµì  ê°„í˜¸ë¥¼ ì£¼ì¥í–ˆìŠµë‹ˆë‹¤."},
            {id:37, category:"ì—­ì‚¬", question:"ICN ì°½ì„¤ ì£¼ë„/ë©´í—ˆì œ ì£¼ì¥ì€?", options:["ë‚˜ì´íŒ…ê²Œì¼","íœìœ„í¬","ì•Œë Œ","ë°”ë¥´íŠ¼"], answer:1, explanation:"ì˜êµ­ì˜ íœìœ„í¬ ì—¬ì‚¬ì…ë‹ˆë‹¤."},
            {id:38, category:"ì „ë¬¸ì§ê´€", question:"í™€ì˜ ì²™ë„ ì œì™¸ í•­ëª©ì€?", options:["ë‹¨ì²´ì°¸ì¡°","ê³µê³µë´‰ì‚¬","ììœ¨ì„±","ë†’ì€ ê¸‰ì—¬"], answer:3, explanation:"ë†’ì€ ê¸‰ì—¬ëŠ” í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤."},
            {id:39, category:"ì—­ì‚¬", question:"1951ë…„ ì „ì‹œ ì˜ë£Œì¸ í™•ë³´ ë²•ì€?", options:["êµ­ë¯¼ì˜ë£Œë²•","ì˜ë£Œë²•","ë³´ê±´ì†Œë²•","ì•½ì‚¬ë²•"], answer:0, explanation:"êµ­ë¯¼ì˜ë£Œë²•(ê²€ì •ê³ ì‹œì œ í¬í•¨)."},
            {id:40, category:"ì—­ì‚¬", question:"1949ë…„ ìœ¡êµ°ë³¸ë¶€ ì˜ë¬´ê°ì‹¤ ê¸°êµ¬ëŠ”?", options:["ê°„í˜¸ê³„","ê°„í˜¸ê³¼","ê°„í˜¸êµ­","ê°„í˜¸ì²˜"], answer:0, explanation:"ê°„í˜¸ê³„ê°€ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤."},
            {id:41, category:"ìœ¤ë¦¬", question:"ìœ¤ë¦¬ê°•ë ¹ ë‚´ìš© ì•„ë‹Œ ê²ƒì€?", options:["í‰ë“±","ë¹„ë°€ ìœ ì§€","ì§ˆ í–¥ìƒ","ì˜ì‚¬ ì ˆëŒ€ ë³µì¢…"], answer:3, explanation:"í˜‘ë ¥ ê´€ê³„ì´ì§€ ì ˆëŒ€ ë³µì¢… ì•„ë‹˜."},
            {id:42, category:"ì „ë¬¸ì§ê´€", question:"ì „ë¬¸ì§ ììœ¨ì„± ì˜ë¯¸ëŠ”?", options:["ì™¸ë¶€ í†µì œ","ì—…ë¬´ ìŠ¤ìŠ¤ë¡œ í†µì œ","ê²½ì œì  ë¶€ìœ ","ì±…ì„ ë©´ì œ"], answer:1, explanation:"ì§ë¬´ì— ëŒ€í•œ ìŠ¤ìŠ¤ë¡œì˜ í†µì œê¶Œ."},
            {id:43, category:"ì „ë¬¸ì§ê´€", question:"ì‚¬íšŒí™” ê²°ê³¼ ì•„ë‹Œ ê²ƒì€?", options:["ì •ì²´ì„± í˜•ì„±","ì§ì—…ì  ê¸ì§€","ì—­í•  ê°ˆë“± ì‹¬í™”","ë¬¸í™” ë‚´ë©´í™”"], answer:2, explanation:"ì—­í•  ê°ˆë“±ì„ ê·¹ë³µí•´ê°€ëŠ” ê³¼ì •."},
            {id:44, category:"ë²•ê·œ", question:"ì˜ë£Œì¸ ê²°ê²© ì‚¬ìœ  ì•„ë‹Œ ê²ƒì€?", options:["ì •ì‹ ì§ˆí™˜ì","ë§ˆì•½ì¤‘ë…ì","í”¼ì„±ë…„í›„ê²¬ì¸","íŒŒì‚° í›„ ë³µê¶Œëœ ì"], answer:3, explanation:"ë³µê¶Œëœ ìëŠ” ì˜ë£Œì¸ ê°€ëŠ¥."},
            {id:45, category:"ë²•ê·œ", question:"ëŒ€í†µë ¹ë ¹ ë³´ê±´í™œë™ ì•„ë‹Œ ê²ƒì€?", options:["ë³´ê±´ì§„ë£Œì›","ëª¨ìë³´ê±´","ê²°í•µê´€ë¦¬","ì‘ê¸‰êµ¬ì¡°ëŒ€í–‰"], answer:3, explanation:"ì‘ê¸‰êµ¬ì¡°ì‚¬ ì—…ë¬´ ëŒ€í–‰ì€ ì•„ë‹˜."},
            {id:46, category:"ì—­ì‚¬", question:"ì¡°ì„ ì‹œëŒ€ í™œì¸ì„œ ê¸°ëŠ¥ì€?", options:["ì™•ì‹¤ ì•½","ì „ì—¼ë³‘/êµ¬íœ¼","ì˜ë…€ êµìœ¡","ì•½ì¬ ì¬ë°°"], answer:1, explanation:"ì „ì—¼ë³‘ ì¹˜ë£Œì™€ ë¹ˆë¯¼ êµ¬íœ¼."},
            {id:47, category:"ì—­ì‚¬", question:"1906 ì„¸ë¸Œë€ìŠ¤ ì–‘ì„±ì†Œ íŠ¹ì§•ì€?", options:["ìµœì´ˆ ì–‘ì„±ì†Œ","ì‰´ì¦ˆ ì´ˆëŒ€êµì¥","ë‚¨ë…€ê³µí•™","êµ­ë¦½"], answer:1, explanation:"ì‰´ì¦ˆê°€ ì´ˆëŒ€ êµì¥ì…ë‹ˆë‹¤."},
            {id:48, category:"ì—­ì‚¬", question:"ëŒ€í•œì˜ì› ì„¤ë¦½ ì—°ë„ëŠ”?", options:["1885","1899","1907","1910"], answer:2, explanation:"1907ë…„ ì„¤ë¦½."},
            {id:49, category:"ì—­ì‚¬", question:"ì¼ì œê°•ì ê¸° ê³µì¤‘ë³´ê±´ í™œë™ì€?", options:["íƒœí™”ì—¬ìê´€","ë³´êµ¬ì—¬ê´€","ì œì¤‘ì›","ëŒ€í•œì˜ì›"], answer:0, explanation:"íƒœí™”ì—¬ìê´€(1923)."},
            {id:50, category:"ì—­ì‚¬", question:"1945ë…„ í•´ë°© ì§í›„ ë‹¨ì²´ëŠ”?", options:["ì¡°ì„ ê°„í˜¸í˜‘íšŒ","ì¡°ì„ ê°„í˜¸ë¶€íšŒ","ëŒ€í•œê°„í˜¸í˜‘íšŒ","í•™íšŒ"], answer:0, explanation:"1946ë…„ ì¡°ì„ ê°„í˜¸í˜‘íšŒ ë°œì¡±."},
            {id:51, category:"ì—­ì‚¬", question:"1960ë…„ëŒ€ ê°„í˜¸ì‚¬ íŒŒê²¬êµ­ì€?", options:["ë¯¸êµ­","ë…ì¼(ì„œë…)","ë² íŠ¸ë‚¨","ì¼ë³¸"], answer:1, explanation:"ì„œë… íŒŒê²¬."},
            {id:52, category:"ë²•ê·œ", question:"ì˜ë£Œê¸°ê´€ ì¸ì¦í‰ê°€ ì£¼ê´€ì€?", options:["ë³µì§€ë¶€","ì˜ë£Œê¸°ê´€í‰ê°€ì¸ì¦ì›","í˜‘íšŒ","ì‹¬í‰ì›"], answer:1, explanation:"ì˜ë£Œê¸°ê´€í‰ê°€ì¸ì¦ì›."},
            {id:53, category:"ë²•ê·œ", question:"ë©´í—ˆ ì‹ ê³  ì£¼ê¸°ëŠ”?", options:["1ë…„","2ë…„","3ë…„","5ë…„"], answer:2, explanation:"3ë…„ë§ˆë‹¤ ì‹ ê³ ."},
            {id:54, category:"ë²•ê·œ", question:"ì „ë¬¸ê°„í˜¸ì‚¬ ìê²© ê·œì¹™ ì œì •ë…„ë„ëŠ”?", options:["2000","2003","2006","2010"], answer:2, explanation:"2006ë…„ ì œì •."},
            {id:55, category:"ì „ë¬¸ì§ê´€", question:"í¬ë˜ë¨¸ í˜„ì‹¤ì¶©ê²© ìˆœì„œëŠ”?", options:["ë°€ì›”-ì¶©ê²©-íšŒë³µ-í•´ê²°","ì¶©ê²©-ë°€ì›”-íšŒë³µ-í•´ê²°","ë°€ì›”-íšŒë³µ-ì¶©ê²©-í•´ê²°","í•´ê²°-íšŒë³µ-ì¶©ê²©-ë°€ì›”"], answer:0, explanation:"ë°€ì›”ê¸°->ì¶©ê²©ê¸°->íšŒë³µê¸°->í•´ê²°ê¸°."},
            {id:56, category:"ì „ë¬¸ì§ê´€", question:"ë² ë„ˆ 'ì „ì²´ì  ìƒí™© íŒŒì•…' ë‹¨ê³„ëŠ”?", options:["ì´ˆì‹¬ì","ì‹ ì°¸ì","ì ì„ì","ìˆ™ë ¨ê°€"], answer:3, explanation:"ìˆ™ë ¨ê°€(Proficient)."},
            {id:57, category:"ìœ¤ë¦¬", question:"ì„ìƒì‹œí—˜ ë™ì˜ ê´€ë ¨ ì›ì¹™ì€?", options:["ììœ¨ì„± ì¡´ì¤‘","ì„ í–‰","ì•…í–‰ê¸ˆì§€","ì •ì˜"], answer:0, explanation:"ììœ¨ì„± ì¡´ì¤‘(ì‚¬ì „ë™ì˜)."},
            {id:58, category:"ì—­ì‚¬", question:"3ë…„ì œ ì¡¸ì—…ì í•™ì‚¬ ì·¨ë“ ì œë„ëŠ”?", options:["RN-BSN","ì „ë¬¸ê°„í˜¸ì‚¬","ì¡°ì‚°ì‚¬","ë³´ìˆ˜êµìœ¡"], answer:0, explanation:"RN-BSN ì œë„."},
            {id:59, category:"ë²•ê·œ", question:"ê°„í˜¸ê°„ë³‘í†µí•©ì„œë¹„ìŠ¤ ì£¼ì²´ëŠ”?", options:["ë³´ê±´ì†Œ","ë³‘ì›ê¸‰ ì˜ë£Œê¸°ê´€","ì•½êµ­","ì¡°ì‚°ì›"], answer:1, explanation:"ë³‘ì›ê¸‰ ì˜ë£Œê¸°ê´€."},
            {id:60, category:"ì—­ì‚¬", question:"êµ­ì™¸ ì§„ì¶œ ê¸ì •ì  íš¨ê³¼ ì•„ë‹Œ ê²ƒì€?", options:["ê²½ì œ ë°œì „","ê¸°ìˆ  ìŠµë“","ìœ„ìƒ ì œê³ ","ì¸ë ¥ ê³¼ì‰ í•´ì†Œ"], answer:3, explanation:"ì˜¤íˆë ¤ ì¸ë ¥ ë¶€ì¡± ì•¼ê¸°."},
            {id:61, category:"ì „ë¬¸ì§ê´€", question:"'ì¥ê¸°ê°„ êµìœ¡' ê°•ì¡° í•™ìëŠ”?", options:["í”Œë ‰ìŠ¤ë„ˆ/íŒŒë°œì½”","ë‚˜ì´íŒ…ê²Œì¼","í•¸ë”ìŠ¨","ì˜¤ë ˜"], answer:0, explanation:"í”Œë ‰ìŠ¤ë„ˆ, íŒŒë°œì½”."},
            {id:62, category:"ì—­ì‚¬", question:"1948 ê²€ì •ê³ ì‹œ íì§€ ìš´ë™ ì£¼ë„ëŠ”?", options:["ì¡°ì„ ê°„í˜¸í˜‘íšŒ","ì¡°ì„ ì˜í•™íšŒ","ë¯¸êµ°ì •ì²­","ë³µì§€ë¶€"], answer:0, explanation:"ì¡°ì„ ê°„í˜¸í˜‘íšŒ(ëŒ€í•œê°„í˜¸í˜‘íšŒ)."},
            {id:63, category:"ì—­ì‚¬", question:"êµ­ê°€ì‹œí—˜ ë§¤ë…„ ì‹œí–‰ ì‹œì‘ì€?", options:["1951","1962","1973","1987"], answer:1, explanation:"1962ë…„ ì˜ë£Œë²• ê°œì •."},
            {id:64, category:"ë²•ê·œ", question:"ê±´ê°• ê´€ë¦¬ ì§€ë„ ì˜ë¬´ëŠ”?", options:["ìš”ì–‘ë°©ë²• ì§€ë„ì˜ë¬´","ì§„ë£Œë³´ì¡°","ê°ì‹œì˜ë¬´","ë¹„ë°€ìœ ì§€"], answer:0, explanation:"ì˜ë£Œë²• ì œ24ì¡°."},
            {id:65, category:"ë²•ê·œ", question:"íƒœì•„ ì„±ê°ë³„ ê¸ˆì§€ ìœ¤ë¦¬ëŠ”?", options:["ìƒëª… ì¡´ì¤‘","ë¹„ë°€ ìœ ì§€","ì§„ì‹¤ ë§í•˜ê¸°","ì•½ì†"], answer:0, explanation:"ìƒëª… ì¡´ì¤‘(ë‚™íƒœ ë°©ì§€)."},
            {id:66, category:"ì „ë¬¸ê°„í˜¸ì‚¬", question:"ì „ë¬¸ê°„í˜¸ì‚¬ êµìœ¡ ìš´ì˜ì€?", options:["ë³´ê±´ì†Œ","ì§€ì • ëŒ€í•™ì›(ì„ì‚¬)","í˜‘íšŒ","ë³‘ì›"], answer:1, explanation:"ë³µì§€ë¶€ ì§€ì • ëŒ€í•™ì›."},
            {id:67, category:"ì—­ì‚¬", question:"1897 ì •ë™ë³‘ì› ì—¬ì„±ì§„ë£Œì†Œ ê°œì„¤ì€?", options:["íˆë“œì½”íŠ¸","ì›¹ìŠ¤í„°","ì‰´ì¦ˆ","ì—ë“œë¨¼ì¦ˆ"], answer:0, explanation:"íˆë“œì½”íŠ¸."},
            {id:68, category:"ì—­ì‚¬", question:"ì¼ì œê°•ì ê¸° ê²½ì„±ì œëŒ€ ë¶€ì† ë³‘ì›ì€?", options:["ê²½ì„±ì œêµ­ëŒ€í•™ë³‘ì›","ëŒ€í•œì˜ì›","ì œì¤‘ì›","ì´ë…ë¶€"], answer:0, explanation:"ëŒ€í•œì˜ì›->ì´ë…ë¶€ì˜ì›->ê²½ì„±ì œëŒ€ë³‘ì›."},
            {id:69, category:"ì „ë¬¸ì§ê´€", question:"ì „ë¬¸ì§ ììœ¨ì„± í•µì‹¬ì€?", options:["ë…ìì  ê²°ì •/ì±…ì„","ê²½ì œì  ë…ë¦½","ë¶„ë¦¬","ê¶Œìœ„"], answer:0, explanation:"ìŠ¤ìŠ¤ë¡œ ê²°ì •í•˜ê³  ì±…ì„ì§."},
            {id:70, category:"ì—­ì‚¬", question:"1950ë…„ëŒ€ êµìœ¡ íŠ¹ì§•ì€?", options:["ì „ìŸ ì¤‘ ì§€ì†","4ë…„ì œ ì‹œì‘","ê²€ì •ê³ ì‹œ ë³‘í–‰","ëª¨ë‘ ì •ë‹µ"], answer:3, explanation:"ëª¨ë‘ ë§ìŠµë‹ˆë‹¤."},
            {id:71, category:"ë²•ê·œ", question:"ê°„í˜¸ì‚¬ ì •ì˜ í¬í•¨ ì•ˆë˜ëŠ” ì—…ë¬´?", options:["ê°„í˜¸ìš”êµ¬ ê´€ì°°","ì§„ë£Œ ë³´ì¡°","ì˜ˆë°©ì ‘ì¢…(ë…ì)","ì¡°ë¬´ì‚¬ ì§€ë„"], answer:2, explanation:"ì˜ˆë°©ì ‘ì¢…ì€ ì§„ë£Œ ë³´ì¡°ì„."},
            {id:72, category:"ìœ¤ë¦¬", question:"DNR ìµœìš°ì„  ê³ ë ¤ ê°€ì¹˜ëŠ”?", options:["ìê¸°ê²°ì •ê¶Œ","ì˜ë£Œì§„ í¸ì˜","ê²½ì œì‚¬ì •","ê·œì¹™"], answer:0, explanation:"í™˜ìì˜ ììœ¨ì„±."},
            {id:73, category:"ì—­ì‚¬", question:"1980ë…„ëŒ€ ì´ìŠˆ ì•„ë‹Œ ê²ƒì€?", options:["ëª…ì¹­ ë³€ê²½","í•™ë¬¸ ë°œì „","ì „ë¬¸ê°„í˜¸ì‚¬","ê°„í˜¸ë²• ì œì •"], answer:3, explanation:"ê°„í˜¸ë²• ì œì • ì•ˆ ë¨."},
            {id:74, category:"ì „ë¬¸ì§ê´€", question:"ì „ë¬¸ì§ ì¸ì • ì‹œê¸‰ ê³¼ì œëŠ”?", options:["ë²•ì  ê¸°ë°˜ ê°•í™”","ê¸‰ì—¬ ì¸ìƒ","ìœ ë‹ˆí¼","ë³‘ì› í™•ëŒ€"], answer:0, explanation:"ë²•ì  ê¸°ë°˜(ê°„í˜¸ë²•) ê°•í™”."},
            {id:75, category:"ì—­ì‚¬", question:"1960ë…„ëŒ€ ê°„í˜¸ì¡°ë¬´ì‚¬ ë„ì… ë°°ê²½?", options:["ì¸ë ¥ ë¶€ì¡±","ì—…ë¬´ ê²½ê°","ì˜ì‚¬ ìš”ì²­","ê³ ìš©"], answer:0, explanation:"í•´ì™¸ ìœ ì¶œë¡œ ì¸í•œ ì¸ë ¥ ë¶€ì¡±."},
            {id:76, category:"ì—­ì‚¬", question:"ì´í™”ì—¬ëŒ€ ê°„í˜¸êµìœ¡(ë³´êµ¬ì—¬ê´€) ì‹œì‘?", options:["1903","1945","1955","1960"], answer:0, explanation:"1903ë…„ ë³´êµ¬ì—¬ê´€ ì–‘ì„±ì†Œ."},
            {id:77, category:"ì—­ì‚¬", question:"êµ¬í•œë§ 'ê´‘ì œì›' ì„±ê²©ì€?", options:["ì •ë¶€ ì„¤ë¦½ ì„œì–‘ì‹","ì¼ë³¸ ì „ìš©","ì„ êµ","í•œë°©"], answer:0, explanation:"ì •ë¶€ ì„¤ë¦½(ë‚´ë¶€ ì†Œê´€)."},
            {id:78, category:"ì¢…í•©", question:"ê°„í˜¸í•™ê°œë¡  í•™ìŠµ ëª©ì ?", options:["ê¸°ìˆ ","ì „ë¬¸ì§ê´€ í™•ë¦½","í•´ë¶€í•™","ì•½ë¬¼"], answer:1, explanation:"ì „ë¬¸ì§ê´€ ë° ì •ì²´ì„± í™•ë¦½."},
            {id:79, category:"ì—­ì‚¬", question:"1923 íƒœí™”ì—¬ìê´€ í™œë™?", options:["ì •ì‹ ","ê³µì¤‘ë³´ê±´(ëª¨ì)","êµ°","ìˆ˜ìˆ "], answer:1, explanation:"ëª¨ìë³´ê±´ ì‚¬ì—…."},
            {id:80, category:"ì—­ì‚¬", question:"1914ë…„ ìµœì´ˆ ë²•ê·œ?", options:["ì˜ë£Œë²•","êµ­ë¯¼ì˜ë£Œë²•","ê°„í˜¸ë¶€ê·œì¹™","ë³´ê±´ì†Œë²•"], answer:2, explanation:"ê°„í˜¸ë¶€ê·œì¹™/ì‚°íŒŒê·œì¹™."},
            {id:81, category:"ì—­ì‚¬", question:"1923ë…„ í˜‘íšŒ ì „ì‹ ?", options:["ì¡°ì„ ê°„í˜¸ë¶€íšŒ","ì¬ì¡°ì„ ì¡¸ì—…ê°„í˜¸ë¶€íšŒ","í˜‘íšŒ","í•™íšŒ"], answer:0, explanation:"ì¡°ì„ ê°„í˜¸ë¶€íšŒ."},
            {id:82, category:"ì—­ì‚¬", question:"ì¡°ì„ ê°„í˜¸ë¶€íšŒ ì´ˆëŒ€íšŒì¥?", options:["ì—ë“œë¨¼ì¦ˆ","ì…°í•‘(ì„œì„œí‰)","ì•Œë Œ","ìŠ¤í¬ëœíŠ¼"], answer:1, explanation:"ì„œì„œí‰ ì„ êµì‚¬."},
            {id:83, category:"ì—­ì‚¬", question:"1945 ë¯¸êµ°ì • í–‰ì • ê¸°êµ¬?", options:["ê°„í˜¸ì‚¬ì—…êµ­","ê°„í˜¸ê³¼","ì˜ì •êµ­","ë³´ê±´ê³¼"], answer:0, explanation:"ê°„í˜¸ì‚¬ì—…êµ­."},
            {id:84, category:"ì—­ì‚¬", question:"1946 ê³ ë“±ê°„í˜¸í•™êµ ì—°í•œ?", options:["1ë…„","2ë…„","3ë…„","4ë…„"], answer:2, explanation:"3ë…„(ì¤‘4ì¡¸)."},
            {id:85, category:"ì—­ì‚¬", question:"1948 ì •ë¶€ìˆ˜ë¦½ í›„ ë³€í™”?", options:["ì‚¬ì—…ê³¼ ì¶•ì†Œ","ìŠ¹ê²©","íì§€","ì´ê´€"], answer:0, explanation:"ê°„í˜¸ì‚¬ì—…ê³¼ë¡œ ì¶•ì†Œ."},
            {id:86, category:"ì—­ì‚¬", question:"1948 ì°½ì„¤ êµ° ì¡°ì§?", options:["ìœ¡êµ°ê°„í˜¸ì¥êµë‹¨","ê³µêµ°","ì‚¬ê´€í•™êµ","ì˜ë¬´ë³‘ê³¼"], answer:0, explanation:"ìœ¡êµ°ê°„í˜¸ì¥êµë‹¨."},
            {id:87, category:"ì—­ì‚¬", question:"1962 ì˜ë£Œë²• í•µì‹¬?", options:["ëª…ì¹­","êµ­ê°€ê³ ì‹œ(ê²€ì •ê³ ì‹œ íì§€)","ì „ë¬¸ê°„í˜¸ì‚¬","4ë…„ì œ"], answer:1, explanation:"ê²€ì •ê³ ì‹œ íì§€."},
            {id:88, category:"ì—­ì‚¬", question:"1973 ì˜ë£Œë²• ë‚´ìš© ì•„ë‹˜?", options:["ë¶„ì•¼ë³„ ê°„í˜¸ì‚¬","ë³´ìˆ˜êµìœ¡","ê³ ë“±ê¸°ìˆ í•™êµ íì§€","ëª…ì¹­ ë³€ê²½"], answer:3, explanation:"ëª…ì¹­ ë³€ê²½ì€ 1987ë…„."},
            {id:89, category:"ì—­ì‚¬", question:"60~70ë…„ëŒ€ í•´ì™¸ ì§„ì¶œêµ­?", options:["ë¯¸êµ­","ë…ì¼(ì„œë…)","ë² íŠ¸ë‚¨","ì¼ë³¸"], answer:1, explanation:"ì„œë…."},
            {id:90, category:"ì—­ì‚¬", question:"4ë…„ì œ(ì´í™”ì—¬ëŒ€) ì‹œì‘?", options:["1945","1953","1955","1960"], answer:2, explanation:"1955ë…„."},
            {id:91, category:"ì—­ì‚¬", question:"1987 ì˜ë£Œë²• ë³€í™”?", options:["ê°„í˜¸ì›->ê°„í˜¸ì‚¬","íì§€","êµ­ê°€ê³ ì‹œ","ë©´í—ˆì‹ ê³ "], answer:0, explanation:"ëª…ì¹­ ë³€ê²½."},
            {id:92, category:"ì—­ì‚¬", question:"ìµœì´ˆ ë‚˜ì´íŒ…ê²Œì¼ ê¸°ì¥?", options:["ì´íš¨ì •","ê¹€ì˜¨ìˆœ","ë§¤í˜œë€","í™ì˜¥ìˆœ"], answer:0, explanation:"ì´íš¨ì •."},
            {id:93, category:"ì—­ì‚¬", question:"1970 í•™ìˆ  ë‹¨ì²´?", options:["ëŒ€í•œê°„í˜¸í•™íšŒ","ë³‘ì›","ë³´ê±´","ì„ìƒ"], answer:0, explanation:"ëŒ€í•œê°„í˜¸í•™íšŒ."},
            {id:94, category:"ì—­ì‚¬", question:"1980 ë†íŠ¹ë²• ì¸ë ¥?", options:["ë³´ê±´ì§„ë£Œì›","ë³´ê±´êµì‚¬","ì‚°ì—…","ê°€ì •"], answer:0, explanation:"ë³´ê±´ì§„ë£Œì›."},
            {id:95, category:"ì „ë¬¸ì§ê´€", question:"'ë°€ì›”ê¸°' íŠ¹ì§•?", options:["ëª¨ë“  ê²ƒì´ ì¢‹ìŒ","ì‹¤íŒ¨","ìœ ë¨¸","í†µí•©"], answer:0, explanation:"ì´ˆê¸° ê¸ì •ì  ì‹œê¸°."},
            {id:96, category:"ì „ë¬¸ì§ê´€", question:"ë‹¬íŠ¼ 1ë‹¨ê³„(ìˆ˜ìŠµì)?", options:["ì˜ì¡´ì ","ë…ë¦½","ë©˜í† ","ë°©í–¥"], answer:0, explanation:"ì˜ì¡´ì  ë‹¨ê³„."},
            {id:97, category:"ì „ë¬¸ì§ê´€", question:"ì „ë¬¸ì§ ììœ¨ì„±?", options:["ìŠ¤ìŠ¤ë¡œ í†µì œ/ê²°ì •","íƒ€ ì§ì¢…","ë¶€ìœ ","ë©´ì œ"], answer:0, explanation:"ìŠ¤ìŠ¤ë¡œ ê²°ì • ê¶Œí•œ."},
            {id:98, category:"ì „ë¬¸ì§ê´€", question:"ë°œì „ ì €í•´ ìš”ì¸?", options:["ë†’ì€ ì´ì§ë¥ ","ê°„í˜¸ë²•","ì¼ì›í™”","ê·¼ê±°"], answer:0, explanation:"ë†’ì€ ì´ì§ë¥ ."},
            {id:99, category:"ì „ë¬¸ì§ê´€", question:"ë² ë„ˆ ì‹ ê·œ ê°„í˜¸ì‚¬?", options:["ì‹ ì°¸ì","ì´ˆì‹¬ì","ì ì„ì","ìˆ™ë ¨ê°€"], answer:0, explanation:"ì‹ ì°¸ì(Advanced Beginner)."},
            {id:100, category:"ì „ë¬¸ì§ê´€", question:"ìœ¤ë¦¬ê°•ë ¹ ì—­í• ?", options:["ììœ¨ì  í†µì œ","ì²˜ë²Œ","ìˆ˜ì…","ë…ì "], answer:0, explanation:"ììœ¨ì  í†µì œ í‘œì¤€."}
        ];

        // --- 2. APP LOGIC ---
        let currentQuiz = [], currentIndex = 0, score = 0;
        let wrongAnswers = JSON.parse(localStorage.getItem('nursing_wrong_v5')) || [];
        let masteredIds = JSON.parse(localStorage.getItem('nursing_master_v5')) || [];
        let stats = JSON.parse(localStorage.getItem('nursing_stats_v5')) || {attempts:0, sum:0};
        let session = JSON.parse(localStorage.getItem('nursing_session_v5'));

        // [New] DOMContentLoaded listener
        document.addEventListener('DOMContentLoaded', () => {
            renderConcepts(); 
            updateDashboard();
            if(localStorage.getItem('theme') === 'dark') document.body.classList.add('dark-mode');
            checkActiveSession(); 
        });

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
        }

        function checkActiveSession() {
            if (session && session.active) {
                document.getElementById('resume-area').classList.remove('hidden');
                document.getElementById('resume-qnum').innerText = session.index + 1;
                if(session.lastSaved) {
                    const date = new Date(session.lastSaved);
                    document.getElementById('resume-date').innerText = date.toLocaleString();
                }
            } else {
                document.getElementById('resume-area').classList.add('hidden');
            }
        }

        function switchTab(tab) {
            ['home','concept','wrong','quiz','result','data'].forEach(id => document.getElementById('screen-'+id).classList.add('hidden'));
            document.getElementById('screen-'+tab).classList.remove('hidden');
            
            // Nav Styling
            ['d', 'm'].forEach(p => {
                ['home', 'concept', 'wrong', 'data'].forEach(t => {
                    const el = document.getElementById(`${p}-nav-${t}`);
                    if(el) {
                        el.classList.remove('text-indigo-600', 'bg-indigo-50');
                        el.classList.add(p === 'd' ? 'text-gray-500' : 'text-gray-400');
                    }
                });
            });
            const activeD = document.getElementById(`d-nav-${tab}`);
            const activeM = document.getElementById(`m-nav-${tab}`);
            if(activeD) { activeD.classList.add('text-indigo-600', 'bg-indigo-50'); activeD.classList.remove('text-gray-500'); }
            if(activeM) { activeM.classList.add('text-indigo-600'); activeM.classList.remove('text-gray-400'); }

            if(tab === 'wrong') renderWrong();
            if(tab === 'home') {
                updateDashboard();
                checkActiveSession();
            }
        }

        function updateDashboard() {
            document.getElementById('total-attempts').innerText = stats.attempts;
            document.getElementById('avg-score').innerText = stats.attempts ? (stats.sum/stats.attempts).toFixed(1)+'%' : '0%';
            document.getElementById('mastered-count').innerText = masteredIds.length;
            document.getElementById('total-wrong').innerText = wrongAnswers.length;
            
            const masterBar = document.getElementById('master-bar');
            if (masterBar) {
                masterBar.style.width = `${masteredIds.length}%`;
            }

            const badgeD = document.getElementById('d-nav-wrong-badge');
            const badgeM = document.getElementById('m-nav-wrong-badge');
            if(wrongAnswers.length > 0) {
                badgeD.innerText = wrongAnswers.length; badgeD.classList.remove('hidden');
                badgeM.classList.remove('hidden');
                document.getElementById('retry-btn').classList.remove('hidden');
            } else {
                badgeD.classList.add('hidden');
                badgeM.classList.add('hidden');
                document.getElementById('retry-btn').classList.add('hidden');
            }
        }

        function renderConcepts() {
            const container = document.getElementById('concept-container');
            container.innerHTML = concepts.map(c => 
                `<div class="bg-white dark:bg-slate-800 rounded-2xl card-shadow overflow-hidden border-l-4 border-${c.color}-500 transform transition hover:scale-[1.01]">
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-4 dark:text-white flex items-center gap-2">
                            <span class="w-2 h-2 rounded-full bg-${c.color}-500"></span> ${c.title}
                        </h3>
                        ${c.content}
                    </div>
                </div>`
            ).join('');
        }

        function saveSession() {
            session = {
                quiz: currentQuiz,
                index: currentIndex,
                score: score,
                active: true,
                lastSaved: new Date().toISOString()
            };
            localStorage.setItem('nursing_session_v5', JSON.stringify(session));
        }

        function clearSession() {
            localStorage.removeItem('nursing_session_v5');
            session = null;
        }

        function resumeQuiz() {
            if (!session) return;
            currentQuiz = session.quiz;
            currentIndex = session.index;
            score = session.score;
            switchTab('quiz');
            loadQuestion();
        }

        function startQuiz(mode) {
            if (session && session.active) {
                if (!confirm("ì§„í–‰ ì¤‘ì¸ í€´ì¦ˆê°€ ìˆìŠµë‹ˆë‹¤. ìƒˆë¡œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(ê¸°ì¡´ ì§„í–‰ ìƒí™©ì€ ì‚­ì œë©ë‹ˆë‹¤)")) return;
            }

            currentQuiz = [];
            score = 0;
            currentIndex = 0;

            if(mode === 'all') currentQuiz = [...questionsDB];
            else if(mode === 'theory') currentQuiz = questionsDB.filter(q => q.category === 'ì „ë¬¸ì§ê´€');
            else if(mode === 'history') currentQuiz = questionsDB.filter(q => q.category.includes('ì—­ì‚¬'));
            else if(mode === 'law') currentQuiz = questionsDB.filter(q => ['ë²•ê·œ', 'ìœ¤ë¦¬'].includes(q.category));
            else if(mode === 'random30') currentQuiz = [...questionsDB].sort(() => 0.5 - Math.random()).slice(0, 30);
            else if(mode === 'retry') currentQuiz = [...wrongAnswers];

            if(currentQuiz.length === 0) { alert('í•´ë‹¹í•˜ëŠ” ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.'); return; }
            
            switchTab('quiz');
            loadQuestion();
        }

        function loadQuestion() {
            if(currentIndex >= currentQuiz.length) { finishQuiz(); return; }
            
            saveSession();

            const q = currentQuiz[currentIndex];
            document.getElementById('q-num').innerText = currentIndex + 1;
            document.getElementById('q-text').innerText = q.question;
            document.getElementById('quiz-category').innerText = q.category;
            document.getElementById('progress-bar').style.width = `${((currentIndex) / currentQuiz.length) * 100}%`;
            document.getElementById('feedback-area').classList.add('hidden');

            const area = document.getElementById('options-area');
            area.innerHTML = '';
            q.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = "option-btn w-full text-left p-4 rounded-xl border border-gray-200 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition bg-white dark:bg-slate-800 dark:text-gray-200 flex items-center group";
                btn.innerHTML = `<span class="w-6 h-6 rounded-full border border-gray-300 dark:border-gray-600 flex items-center justify-center text-xs mr-3 text-gray-400 group-hover:border-indigo-500 group-hover:text-indigo-500 transition">${idx+1}</span> ${opt}`;
                
                // FIX: Pass 'this' as the second argument
                btn.onclick = function() { checkAnswer(idx, this); };
                
                area.appendChild(btn);
            });
        }

        function checkAnswer(selectedIdx, btnElement) {
            const q = currentQuiz[currentIndex];
            const isCorrect = selectedIdx === q.answer;
            const buttons = document.getElementById('options-area').children;
            
            // Disable all buttons
            for (let btn of buttons) {
                btn.disabled = true;
                btn.classList.add('opacity-70', 'cursor-not-allowed');
            }

            // Ensure btnElement is valid (safety check)
            if (!btnElement) return;
            
            // Re-enable opacity for selected to make it stand out
            btnElement.classList.remove('opacity-70', 'cursor-not-allowed');

            const fbTitle = document.getElementById('fb-title');
            
            // Remove base classes that conflict
            btnElement.classList.remove('hover:border-indigo-500', 'hover:bg-indigo-50');

            if (isCorrect) {
                score++;
                // Add Correct Styles
                btnElement.classList.add('correct');
                fbTitle.innerText = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰";
                fbTitle.className = "font-bold text-lg mb-2 text-green-600 dark:text-green-400";

                if(!masteredIds.includes(q.id)) {
                    masteredIds.push(q.id);
                    localStorage.setItem('nursing_master_v5', JSON.stringify(masteredIds));
                }
                removeFromWrong(q.id);
            } else {
                // Add Wrong Styles
                btnElement.classList.add('wrong');
                fbTitle.innerText = "ì˜¤ë‹µì…ë‹ˆë‹¤ ğŸ˜…";
                fbTitle.className = "font-bold text-lg mb-2 text-red-600 dark:text-red-400";
                
                // Show correct answer visually
                const correctBtn = buttons[q.answer];
                if(correctBtn) {
                     correctBtn.classList.remove('opacity-70');
                     correctBtn.classList.add('correct');
                }
                saveWrong(q);
            }
            
            document.getElementById('fb-desc').innerText = q.explanation;
            document.getElementById('feedback-area').classList.remove('hidden');
            
            // Scroll logic handled by container flow, usually visible
            saveSession();
        }

        function nextQuestion() { currentIndex++; loadQuestion(); }

        function finishQuiz() {
            clearSession();
            updateGlobalStats(score, currentQuiz.length);

            switchTab('result');
            document.getElementById('res-score').innerText = Math.round((score / currentQuiz.length) * 100);
            document.getElementById('res-msg').innerText = score === currentQuiz.length ? "ì™„ë²½í•©ë‹ˆë‹¤! ğŸ‰" : "ì˜¤ë‹µ ë…¸íŠ¸ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.";

            updateDashboard();
        }

        function quitQuiz() { 
            if(confirm("ë©”ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (ì§„í–‰ ìƒí™©ì€ ìë™ ì €ì¥ë©ë‹ˆë‹¤)")) {
                switchTab('home');
            }
        }

        function updateGlobalStats(finalScore, totalQuestions) {
            if (totalQuestions === 0) return;
            const percentage = (finalScore / totalQuestions) * 100;
            stats.attempts += 1;
            stats.sum += percentage;
            localStorage.setItem('nursing_stats_v5', JSON.stringify(stats));
        }

        function saveWrong(q) {
            if(!wrongAnswers.some(w => w.id === q.id)) {
                wrongAnswers.push(q);
                localStorage.setItem('nursing_wrong_v5', JSON.stringify(wrongAnswers));
            }
        }
        function removeFromWrong(id) {
            wrongAnswers = wrongAnswers.filter(w => w.id !== id);
            localStorage.setItem('nursing_wrong_v5', JSON.stringify(wrongAnswers));
        }
        function renderWrong() {
            const container = document.getElementById('wrong-container');
            if(wrongAnswers.length === 0) {
                container.innerHTML = `<div class="text-center py-20 text-gray-400">ì˜¤ë‹µì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
                return;
            }
            container.innerHTML = wrongAnswers.map(q => `
                <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl card-shadow border-l-4 border-red-400">
                    <div class="flex justify-between mb-3">
                        <span class="text-xs font-bold text-white bg-indigo-500 px-2 py-1 rounded">${q.category}</span>
                        <button onclick="deleteWrong(${q.id})" class="text-gray-400 hover:text-red-500"><i class="fas fa-trash-alt"></i></button>
                    </div>
                    <h4 class="font-bold mb-4 dark:text-white text-lg">Q. ${q.question}</h4>
                    <div class="text-sm bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 p-4 rounded-xl mb-3">
                        <span class="font-bold block mb-1">ì •ë‹µ</span>${q.options[q.answer]}
                    </div>
                    <p class="text-xs text-gray-500 dark:text-gray-400">${q.explanation}</p>
                </div>
            `).join('');
        }
        function deleteWrong(id) { if(confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) { removeFromWrong(id); renderWrong(); updateDashboard(); } }
        
        function resetData() { 
            if(confirm("ëª¨ë“  í•™ìŠµ ê¸°ë¡(ì˜¤ë‹µ, ë§ˆìŠ¤í„°, í†µê³„)ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) { 
                localStorage.clear(); 
                stats = {attempts:0, sum:0};
                wrongAnswers = [];
                masteredIds = [];
                session = null;
                location.reload(); 
            } 
        }

        // Data Import/Export
        function generateExportCode() {
            const data = {
                wrong: wrongAnswers,
                mastered: masteredIds,
                stats: stats,
                session: session,
                timestamp: new Date().toISOString()
            };
            const jsonString = JSON.stringify(data);
            const encoded = btoa(unescape(encodeURIComponent(jsonString)));
            document.getElementById('export-area').value = encoded;
        }

        function copyExportCode() {
            const textarea = document.getElementById('export-area');
            textarea.select();
            document.execCommand('copy');
            // Toast notification
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerText = 'ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!';
            document.getElementById('toast-container').appendChild(toast);
            setTimeout(() => toast.remove(), 2000);
        }

        function loadImportCode() {
            const code = document.getElementById('import-area').value;
            if(!code) { alert("ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }
            try {
                const decoded = decodeURIComponent(escape(atob(code)));
                const data = JSON.parse(decoded);
                if(!data.wrong) throw new Error("Format");

                if(confirm(`ë°ì´í„°ë¥¼ ë³µêµ¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\në°±ì—…ì¼ì‹œ: ${data.timestamp || 'ì•Œìˆ˜ì—†ìŒ'}`)) {
                    wrongAnswers = data.wrong;
                    masteredIds = data.mastered || [];
                    stats = data.stats || { attempts: 0, sum: 0 };
                    session = data.session || null;
                    
                    localStorage.setItem('nursing_wrong_v5', JSON.stringify(wrongAnswers));
                    localStorage.setItem('nursing_master_v5', JSON.stringify(masteredIds));
                    localStorage.setItem('nursing_stats_v5', JSON.stringify(stats));
                    if(session) localStorage.setItem('nursing_session_v5', JSON.stringify(session));
                    
                    alert("ë³µêµ¬ ì™„ë£Œ!");
                    location.reload();
                }
            } catch(e) { alert("ì½”ë“œ ì˜¤ë¥˜!"); }
        }
    </script>
</body>
</html>
